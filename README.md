# TomatoNote

Visual Studio Code 用のシンプルなポモドーロタイマーです。(参考: [ポモドーロ・テクニック - Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%9D%E3%83%A2%E3%83%89%E3%83%BC%E3%83%AD%E3%83%BB%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF))

タスク行とタイマーとの紐付けと、タスクごとに完了したトマト数を記録します。

## Install

0. ソースコードをダウンロード

    作業用のディレクトリを作成・移動し、以下を実行

    ```shell
    git clone repo_url .
    ```

1. 必要なパッケージをインストール

   ```shell
   npm ci
   ```

2. vscode extension のパッケージファイル(tomatonote-x.x.x.vsix [^1])の作成

   ```shell
   npm run package
   ```

3. パッケージファイル(tomatonote-x.x.x.vsix [^1]) をインストール

   ```shell
   code --install-extension ./tomatonote-x.x.x.vsix
   ```

4. すでに旧バージョンのパッケージをインストール済みの場合は、本拡張機能を再起動してください。

## 機能

|#|機能|説明|
|---|---|---|
|1 | ステータスバーへのタイマー表示|タイマーの開始・停止操作、残り時間の表示、作業中のタスク名の表示 |
|2| カーソル上のタスク行を作業対象とする | カーソルのある`- [ ] タスク`のようなタスク行を対象とする。|
|3| タスク行にIDを付与| HTMLコメント形式でタスク行にIDを付与する。(例: `- [ ] タスク <!-- id:xxxxx -->`) |
|4| `🍅(作業時間)`タイマーのタイムアウト回数をFrontmatterに記録|Frontmatter内にタイムアウト回数を記録する。|
|5| 日毎の`🍅(作業時間)`タイムアウト数の記録|`~/.tomatonote/yyyymmdd.json`に日毎の`🍅(作業時間)`タイムアウト数を記録する。|


## 使い方

[Hugo](https://gohugo.io/)などのStatic Site Generatorで管理された [Front matter](https://gohugo.io/content-management/front-matter/)が記載された Markdownファイル と共に使用することを前提としています。

1. Frontmatter付きのMarkdownファイルを開きます。

    VSCodeのステータスバーの左側に以下が表示されます。

    ```statusbar
    ⏰ idle -
    ```

2. Markdownファイル内に、以下のようなタスクの一覧を作成します。

    すでに、タスク一覧があれば作成不要です。

    ```md
    - [ ] タスク1
    - [ ] タスク2
    - [ ] タスク3
    ```

3. タスク一覧から作業したいタスクの行にカーソルを移動します。

    今回は`タスク2`の行にカーソルを移動します。

4. ステータスバーの時計をクリックしてタイマーを開始します。

    タイマーが開始され、VSCodeのステータスバーには以下が表示されます。
    タイマーの時間とタスク名が表示され、時間はカウントダウンされます。

    ```statusbar
    ⏰ 25:00 タスク2
    ```

    また、選択されたタスクにはIDが、HTMLコメントの形式で付与されます。

    ```md
    - [ ] タスク1
    - [ ] タスク2 <!-- id:3a073r8q2r3 -->
    - [ ] タスク3
    ```

5. タイマーは、`🍅(作業時間)` と `休憩` を交互に繰り返します。

    タイマーは、`🍅(作業時間)` と `休憩`  を交互に繰り返します。
    4回の`🍅(作業時間)`が完了後には、`🛌(長い休憩時間)` が開始され、
    それ以外の場合は、`☕(短い休憩時間)` が開始されます。

    ```statusbar
    🍅→☕→🍅→☕→🍅→☕→🍅→🛌→🍅→☕→🍅→☕→🍅→☕→🍅→🛌→...
    ```

6. `🍅(作業時間)`の完了回数をFrontmatterに記録します。

    Markdownファイル内のFrontmatter内の該当タスクIDのテーブルに、`tomato = xx` という形式で、`🍅`の完了回数を記録します。

    ```md
    +++
    [params.tasks.3a073r8q2r3]
    tomato = 1
    +++
    ```

7. タイマー開始中に、ステータスバーのアイコン部分(`⏰`,`☕`,`🛌`)をクリックすると、タイマーが停止します。

    ```statusbar
    ⏰ stopped タスク2
    ```

8. ステータスバーのタスク名をクリックすると、該当タスクの記載されたMarkdownファイルが開きます。

## Release Notes

### 0.1.1

- 日毎のtomato数を記録可能に

### 0.1.0

- 初回リリース

[^1]: `x.x.x`部分はバージョン番号